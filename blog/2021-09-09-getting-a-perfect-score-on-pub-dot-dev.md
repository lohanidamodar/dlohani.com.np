---
slug: getting-a-perfect-score-on-pub-dot-dev
title: Getting a Perfect Score on Pub.dev for Dart and Flutter SDK of Appwrite
author: Damodar Lohani
author_title: Web and Mobile Developer
author_url: https://github.com/lohanidamodar
author_image_url: https://avatars1.githubusercontent.com/u/6360216?s=460&u=ccf757cc3aece5b674460c4909b4a77e1d5b6a19&v=4
tags: [flutter, appwrite]
---

Flutter has become one of the trend setters for cross-platform application development in the recent years. I'm working with Flutter for almost 3 years now. During that time I have worked in quite a few projects and also have made few open source applications and plugins myself. In this article however I am going to talk about I Flutter led me to my current position at [Appwrite.io](https://appwrite.io) and what I learned recently refactoring Appwrite's Flutter and Dart SDK for better cross platform support. And I'll also talk about how we got perfect score on pub.dev for both packages.

<!--truncate-->

## How It All Began

I was always insterested in working with open source technologies professionally. I value open source culture and practices as it allows more inclusion. If I had to pay for every lessons and every software that I used, it would have been almost impossible for me to become a professional developer. I found out about Appwrite while looking for open source Firebase alternatives. Built on top of docker service architectures, it was very easy to get started with Appwrite. Soon, I was running Appwrite locally and then trying to build Flutter applications using Appwrite as a back-end service. They already had a first class Flutter support with their dedicated Flutter SDK. My passion to make tutorials and videos about awesome open source product that I personally loved to use, led me to explore Appwrite more and make tutorials. I made several tutorials for getting started with Appwrite and integrating it with Flutter. While working with Flutter and Appwrite, whenever I had issues, I got to talk directly to the founder of Appwrite. Eldad Faux, a very open, helpful and resourceful person. With his help, I also got chance to find out some issue as well as provide some enhancement like adding Flutter web support to their SDK. While working on this, I learned more about Appwrite project and got a chance to have lots of one-to-one conversation with Eldad.

Not long after this, Appwrite grew and they were hiering new developers. Gladly enough I got in and started working in Appwrite. It was a dream job, getting paid to make open source contirbutions to the project I loved and used. After I got in, I got to learn a lot about the vision and philosophy behind the project and slowly started making contributions. Started by working on fixes, adding small features and gradually moving on to enhancing SDK and developer experiences with SDK. Given my interest in Flutter and exploring new technologies, I was leading the Flutter SDK development. As Appwrite has multiple SDKs in multiple languages and platforms. We are using [sdk-generator](https://github.com/appwirte/sdk-generator) to automatically generate SDKs using templates and Swagger specs for our APIs. We already had a Flutter SDK and it supported Flutter iOS, Android, Web, and Desktops. However due to not following proper coding standards, our SDKs (dart and Flutter) were not showing all the platforms they supported. And due to some issues introduced by using templating and generating SDKs, our scores were even lower.

## Refactoring Flutter SDK

So, I decided to refactor the Flutter and Dart SDK to have a proper corss-platform support by following their standards and get a perfect score on pub.dev. To get the perfect score we needed two things. First, to have a properly formatted code and secondaly to have a cross-platform support that followed the standards.

### Code Formatting

First let's talk about code formatting. If we were writing Flutter SDK separately it would have been very easy to format to code either setting to auto format by IDE or format using command line. However, our SDKs were generated using twig templates. And, with twig the most difficult thing I felt is to manage white spaces and indentations. Though we tried our best, we always slipped somewhere. And we did not want to make the process of generating and publishing SDKs complicated by adding custom steps like code formatting for some SDKs in the middle. So, what we did was we started automating the publishing of SDKs from GitHub to the respective package managers. So, for Flutter and Dart SDK we setup travis script that would push the package to pub.dev upon creating new release in GitHub. This was the perfect opportunity to automate code formatting as well. So we modified the travis script so that it would first format the code using dart format tool provided by the dart team and only then push it to pub. And this solved our first issue.

### Better Cross Platform Support

Before the refactor, our Flutter and Dart SDK, everything was exposed. Even the private methods that was not needed by developers using the package were also exposed. Not only that we were using a single client and following old method of writing a package. All the required plugins and packages were imported directly and shared accross the SDK. This led for poor cross platform support. And pub.dev's analysis tool was not able to determine platform supported. So during refactor I followed the Dart's cross platform support guides, coding standards, as well as looked at some of best packages on pub.dev that worked with REST APIs and http requests. Using this knowledge I separated the clients to IO client and Browser client. Then using the [conditional imports](https://dart.dev/guides/libraries/create-library-packages#conditionally-importing-and-exporting-library-files) introduced in Dart 2, I was able to still provide unified experience accross platform without breaking our existing APIs. After being able to do this in Flutter SDK, I then had to translate this back to twig templates so that we could auto generate refactored SDK and used it further down the lane to enhance our SDKs with new Appwrite features. With several trials and tests and tons of feedback from teams during code reviews, I was finally able to make the refactored SDK ready. Which when analyzed locally using [pana](https://pub.dev/packages/pana) package, was able to get the perfect score. Once the Flutter SDK was ready, Dart SDK was fairly simple as it shared most of the stuff, just had to take out few stuffs like cookie management, oauth support etc.

Although I introduced few new bugs, we were able to quickly resolve it based on community support. Kudos to all the devs out there who tested Flutter SDK and provided their valuable feedback. Without them, It would not have been possible.

## What I Learned

Though, I was afraid in the beginning as this was the first time doing something this complex in Flutter. I was afraid that I might not be able to deliver what I promised. But with constant research, immense support and motivation from the whole team and the open source community, I was able to achieve it. During this refactor, I also learnt to use dart's official [http](https://pub.dev/packages/http) package in a way that I could extend it to build cross platform client's for Appwrite. Gowing lower in the clients I was able to handle things like accepting self-signed certificates and cookie management. Previously it was done easliy as we were using dio package for our HTTP requests. However, we decided to use official packages as much as possible, so we switched to http package. I also learned to use conditional imports to make cross-platform APIs seemless. Though it sound difficult at the beginning, as I progressed and started working on it, it was not that big of a deal. Once I started, I was able to achieve it with some research and tutorials as well as looking as some of the packages that already implemented something similar.

## Conclusion

Appwrite now has become a go to software for my Flutter projects as I really love it. Working inside Appwrite added to it as I could see where it was headed and whether or not it would be good for my long running projects. Now I'm using Appwrite for my Flutter applications that are soon going to production.
So, what's the point of writing this. First, even though the task looks very difficult, you will not know the actual difficulty until you start. And for most of the tasks, it's true that it's easier that it looks. You only need courage to start. Once you start, it's easy and following the momentum most of the time leads to success. Secondly, if you have a team that supports and motivates you, nothing is impossible. You just have to believe in yourself. So, whatever tasks you have left out there, thinking it's difficult or you may not achieve it. Just start it and let the momentum take you forward. Just keep working small steps every day and you shall reach success sooner than you expected.
